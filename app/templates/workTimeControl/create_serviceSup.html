{% extends 'base.html' %} 
{%load static%}
{% load widget_tweaks%}
{% load humanize %}
{% block container %}

<div class="container">
    <form method='post' action="{{request.path}}" class="modal-content" id="wtc">
        {% csrf_token %}

        <div class="modal-header">
            <h5>Service</h5>           
        </div>              
       
        <div class="modal-body">                    
                            
                                <!-- Using the formset 
                                    <div class="row">
                                        {{ form.as_p }}
                                     </div>
                                 -->
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="mb3">
                                                    <label for="{{ form.EmployeeID.id_for_label }}" class="form-label">Employee</label>
                                                    {% render_field form.EmployeeID class="form-control" %}
                                                    <div class="invalid-feedback">{{ form.EmployeeID.errors|first }}</div>
                                                </div>    
                                            </div>
                                            <div class="col-sm-6">
                                                <div class="mb3">
                                                    <label for="{{ form.ClientID.id_for_label }}" class="form-label">Client</label>
                                                    {% render_field form.ClientID class="form-control" %}
                                                    <div class="invalid-feedback">{{ form.ClientID.errors|first }}</div>
                                                </div>    
                                            </div>                                            
                                        </div>                                      
                                        
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="mb3">
                                                    <label for="{{ form.service_date.id_for_label }}" class="form-label">Service Date</label>                                                    
                                                    {% render_field form.service_date type="date" name="service_date" id="service_date" class="form-control" %}
                                                    <div class="invalid-feedback">{{ form.service_date.errors|first }}</div>
                                                </div>    
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="mb3">
                                                    <label for="{{ form.payment_date.id_for_label }}" class="form-label">Payment Date</label>                                                    
                                                    {% render_field form.payment_date type="date" name="payment_date" id="payment_date" class="form-control" %}
                                                    <div class="invalid-feedback">{{ form.payment_date.errors|first }}</div>
                                                </div>  
                                            </div>   
                                            <div class="col-sm-4">
                                                <div class="mb3">
                                                    <label for="{{ form.payment_number.id_for_label }}" class="form-label">payment number</label>
                                                    {% render_field form.payment_number class="form-control" %}
                                                    <div class="invalid-feedback">{{ form.payment_number.errors|first }}</div>
                                                </div>    
                                            </div>                                             
                                        </div>                                       
                                    </div>
                                </div> 
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="row">
                                            <div class="col-sm-3">
                                                <div class="mb3">
                                                    <label for="{{ form.payment_method.id_for_label }}" class="form-label">payment_method</label>
                                                    {% render_field form.payment_method class="form-control" %}
                                                    <div class="invalid-feedback">{{ form.payment_method.errors|first }}</div>
                                                </div>    
                                            </div>
                                            <div class="col-sm-3">
                                                <div class="mb3">
                                                    <label for="{{ form.payment_card.id_for_label }}" class="form-label">payment Card</label>
                                                    {% render_field form.payment_card class="form-control" %}
                                                    <div class="invalid-feedback">{{ form.payment_card.errors|first }}</div>
                                                </div>  
                                            </div>   
                                            <div class="col-sm-3">
                                                <div class="mb3">
                                                    <label for="{{ form.payment_amount.id_for_label }}" class="form-label">payment Amount</label>
                                                    {% render_field form.payment_amount class="form-control" %}
                                                    <div class="invalid-feedback">{{ form.payment_amount.errors|first }}</div>
                                                </div>    
                                            </div>  
                                            <div class="col-sm-3">
                                                <div class="mb3">
                                                    <label for="{{ form.rate.id_for_label }}" class="form-label">Rate %</label>
                                                    
                                                    {% render_field form.rate class="form-control" value=emp.rate%}
                                                    <div class="invalid-feedback">{{ form.rate.errors|first }}</div>
                                                </div>    
                                            </div>                                             
                                        </div>                                       
                                    </div>
                                    
                                </div> 
                                <div class="modal-footer">          
                                    <button type="submit" class="btn btn-primary" form="wtc">Save</button>
                                    {% if form.instance.id > 0 %}
                                        {%if empID == None %}
                                            <a class="btn btn-warning" href="/wtc/paidBySalaryRemove/{{form.instance.periodID.id}}/{{form.instance.id}}">Remove</i></a>  
                                        {%else%}
                                            <a class="btn btn-warning" href="/wtc/serviceSup_remove/{{form.instance.id}}/{{periodID}}/{{empID}}">Remove</i></a>  
                                        {%endif%} 
                                    {%endif%} 
                                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button> 
                                </div>
                           
                            </form>
                        </div>
                        
{% endblock %}